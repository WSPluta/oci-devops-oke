version: 0.1             
component: build
timeoutInSeconds: 1000
failImmediatelyOnError: true
shell: bash           

steps:
  - type: Command
    name: "Set Environment"
    command: |
      npx zx scripts/setenv.mjs
  - type: Command
    name: "Build hello-server"
    command: |
      npx zx scripts/build.mjs hello-server
  - type: Command
    name: "Build auth-server"
    command: |
      npx zx scripts/build.mjs auth-server
  - type: Command
    name: "Set Up Deployment"
    command: |
      npx zx scripts/setup.mjs
  - type: Command
    name: "Check kubeconfig file"
    command: |
      file $(pwd)/tf/generated/kubeconfig